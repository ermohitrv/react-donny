!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],e):"object"==typeof exports?exports.ReactChatView=e(require("react"),require("react-dom")):t.ReactChatView=e(t.React,t.ReactDOM)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),c=n(2),u=r(c),l=n(3),a=r(l),f=i["default"].createClass({displayName:"ChatView",propTypes:{flipped:i["default"].PropTypes.bool,scrollLoadThreshold:i["default"].PropTypes.number,onInfiniteLoad:i["default"].PropTypes.func.isRequired,loadingSpinnerDelegate:i["default"].PropTypes.element,className:i["default"].PropTypes.string},getDefaultProps:function(){return{flipped:!1,scrollLoadThreshold:10,loadingSpinnerDelegate:i["default"].createElement("div",null),className:""}},getInitialState:function(){return this.rafRequestId=null,this.scrollTop=0,this.scrollHeight=void 0,{isInfiniteLoading:!1}},componentWillUpdate:function(t,e){},render:function(){var t=(0,a["default"])(this.props.children);this.props.flipped&&t.reverse();var e=i["default"].createElement("div",{ref:"loadingSpinner"},this.state.isInfiniteLoading?this.props.loadingSpinnerDelegate:null);return i["default"].createElement("div",{className:this.props.className,ref:"scrollable",style:{overflowX:"hidden",overflowY:"scroll"}},i["default"].createElement("div",{ref:"smoothScrollingWrapper"},this.props.flipped?e:null,t,this.props.flipped?null:e))},pollScroll:function(){var t=this,e=u["default"].findDOMNode(this);if(e.scrollTop!==this.scrollTop){if(this.shouldTriggerLoad(e)){this.setState({isInfiniteLoading:!0});var n=this.props.onInfiniteLoad();n.then(function(){return t.setState({isInfiniteLoading:!1})})}this.updateScrollTop()}this.rafRequestId=window.requestAnimationFrame(this.pollScroll)},isPassedThreshold:function(t,e,n,r,o){return t?e>=n:n>=r-o-e},shouldTriggerLoad:function(t){var e=this.isPassedThreshold(this.props.flipped,this.props.scrollLoadThreshold,t.scrollTop,t.scrollHeight,t.clientHeight);return e&&!this.state.isInfiniteLoading},componentDidMount:function(){var t=u["default"].findDOMNode(this),e=this.props.flipped?t.scrollHeight-t.clientHeight:0;t.scrollTop=e,this.scrollTop=e,this.rafRequestId=window.requestAnimationFrame(this.pollScroll)},componentWillUnmount:function(){window.cancelAnimationFrame(this.rafRequestId)},componentDidUpdate:function(t,e){this.updateScrollTop()},updateScrollTop:function(){var t=u["default"].findDOMNode(this),e=t.scrollTop+(this.props.flipped?t.scrollHeight-(this.scrollHeight||0):0);e!==t.scrollTop&&(t.scrollTop=e),this.scrollTop=t.scrollTop,this.scrollHeight=t.scrollHeight}});t.exports=f},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){function r(t,e,n,r){return e&&"boolean"!=typeof e&&c(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?o(t,e,i(n,r,3)):o(t,e)}var o=n(4),i=n(14),c=n(15);t.exports=r},function(t,e,n){(function(e){function r(t,e,n,i,d,y,b){var g;if(n&&(g=d?n(t,i,d):n(t)),void 0!==g)return g;if(!a(t))return t;var j=h(t);if(j){if(g=c(t),!e)return f(t,g)}else{var m=B.call(t),w=m==x;if(m!=A&&m!=v&&(!w||d))return C[m]?l(t,m,e):d?t:{};if(g=u(w?{}:t),!e)return p(g,t)}y||(y=[]),b||(b=[]);for(var T=y.length;T--;)if(y[T]==t)return b[T];return y.push(t),b.push(g),(j?s:o)(t,function(o,i){g[i]=r(o,e,n,i,t,y,b)}),g}function o(t,e){return d(t,e,y)}function i(t){var e=new V(t.byteLength),n=new _(e);return n.set(new _(t)),e}function c(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&k.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function u(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}function l(t,e,n){var r=t.constructor;switch(e){case L:return i(t);case g:case j:return new r(+t);case $:case F:case R:case q:case D:case E:case H:case N:case M:var o=t.buffer;return new r(n?i(o):o,t.byteOffset,t.length);case T:case I:return new r(t);case O:var c=new r(t.source,U.exec(t));c.lastIndex=t.lastIndex}return c}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var f=n(5),s=n(6),p=n(7),d=n(13),h=n(12),y=n(9),v="[object Arguments]",b="[object Array]",g="[object Boolean]",j="[object Date]",m="[object Error]",x="[object Function]",w="[object Map]",T="[object Number]",A="[object Object]",O="[object RegExp]",S="[object Set]",I="[object String]",P="[object WeakMap]",L="[object ArrayBuffer]",$="[object Float32Array]",F="[object Float64Array]",R="[object Int8Array]",q="[object Int16Array]",D="[object Int32Array]",E="[object Uint8Array]",H="[object Uint8ClampedArray]",N="[object Uint16Array]",M="[object Uint32Array]",U=/\w*$/,C={};C[v]=C[b]=C[L]=C[g]=C[j]=C[$]=C[F]=C[R]=C[q]=C[D]=C[T]=C[A]=C[O]=C[I]=C[E]=C[H]=C[N]=C[M]=!0,C[m]=C[x]=C[w]=C[S]=C[P]=!1;var W=Object.prototype,k=W.hasOwnProperty,B=W.toString,V=e.ArrayBuffer,_=e.Uint8Array;t.exports=r}).call(e,function(){return this}())},function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}t.exports=n},function(t,e,n){function r(t,e){return null==e?t:o(e,i(e),t)}var o=n(8),i=n(9);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&c(g(t))}function i(t,e){return t="number"==typeof t||d.test(t)?+t:-1,e=null==e?b:e,t>-1&&t%1==0&&e>t}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&b>=t}function u(t){for(var e=a(t),n=e.length,r=n&&t.length,o=!!r&&c(r)&&(p(t)||s(t)),u=-1,l=[];++u<n;){var f=e[u];(o&&i(f,r)||y.call(t,f))&&l.push(f)}return l}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){if(null==t)return[];l(t)||(t=Object(t));var e=t.length;e=e&&c(e)&&(p(t)||s(t))&&e||0;for(var n=t.constructor,r=-1,o="function"==typeof n&&n.prototype===t,u=Array(e),a=e>0;++r<e;)u[r]=r+"";for(var f in t)a&&i(f,e)||"constructor"==f&&(o||!y.call(t,f))||u.push(f);return u}var f=n(10),s=n(11),p=n(12),d=/^\d+$/,h=Object.prototype,y=h.hasOwnProperty,v=f(Object,"keys"),b=9007199254740991,g=r("length"),j=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?u(t):l(t)?v(t):[]}:u;t.exports=j},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return c(n)?n:void 0}function o(t){return i(t)&&p.call(t)==u}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return null==t?!1:o(t)?d.test(f.call(t)):n(t)&&l.test(t)}var u="[object Function]",l=/^\[object .+?Constructor\]$/,a=Object.prototype,f=Function.prototype.toString,s=a.hasOwnProperty,p=a.toString,d=RegExp("^"+f.call(s).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return i(t)&&y.call(t,"callee")&&(!b.call(t,"callee")||v.call(t)==s)}function o(t){return null!=t&&u(g(t))&&!c(t)}function i(t){return a(t)&&o(t)}function c(t){var e=l(t)?v.call(t):"";return e==p||e==d}function u(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return!!t&&"object"==typeof t}var f=9007199254740991,s="[object Arguments]",p="[object Function]",d="[object GeneratorFunction]",h=Object.prototype,y=h.hasOwnProperty,v=h.toString,b=h.propertyIsEnumerable,g=n("length");t.exports=r},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return u(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&b>=t}function i(t){return c(t)&&h.call(t)==a}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return null==t?!1:i(t)?y.test(p.call(t)):n(t)&&f.test(t)}var l="[object Array]",a="[object Function]",f=/^\[object .+?Constructor\]$/,s=Object.prototype,p=Function.prototype.toString,d=s.hasOwnProperty,h=s.toString,y=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=r(Array,"isArray"),b=9007199254740991,g=v||function(t){return n(t)&&o(t.length)&&h.call(t)==l};t.exports=g},function(t,e){function n(t){return function(e,n,r){for(var o=-1,i=Object(e),c=r(e),u=c.length;u--;){var l=c[t?u:++o];if(n(i[l],l,i)===!1)break}return e}}var r=n();t.exports=r},function(t,e){function n(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,c){return t.call(e,n,r,o,i,c)}}return function(){return t.apply(e,arguments)}}function r(t){return t}t.exports=n},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&c(f(t))}function o(t,e){return t="number"==typeof t||l.test(t)?+t:-1,e=null==e?a:e,t>-1&&t%1==0&&e>t}function i(t,e,n){if(!u(n))return!1;var i=typeof e;if("number"==i?r(n)&&o(e,n.length):"string"==i&&e in n){var c=n[e];return t===t?t===c:c!==c}return!1}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&a>=t}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var l=/^\d+$/,a=9007199254740991,f=n("length");t.exports=i}])});